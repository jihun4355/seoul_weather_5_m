
name: Seoul Weather Data Per 5m

on: 

  schedule:

    - cron: "*/5 * * * *" 

  workflow_dispatch: 

jobs:

  request_weather:

    runs-on: ubuntu-latest 

    steps:

      - name: 

        uses: actions/checkout@v3 # 현재 github 저장소를 가져온다

        with: # 같이 진행할 작업

          token: ${{ secrets.GITHUB_TOKEN }}

      - name: 

        uses: actions/setup-python@v4

        with:

          python-version: "3.9"

      - name: 

        run: pip install requests

      - name: 
        env:

          API_KEY: ${{ secrets.API_KEY_W }}

        run: python weather.py

      - name: 

        run: |

          git config --global user.name "github-actions[bot]"

          git config --global user.email "github-actions@github.com"

          git add seoul_weather.csv

          git commit -m "Update weather data (auto)"

          git push
